// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.16.0
// source: jobs.sql

package db

import (
	"context"
	"time"
)

const getAllActivePosts = `-- name: GetAllActivePosts :many
SELECT "pc"."id",
    "pc"."currency",
    "pc"."start_price",
    "pc"."duration",
    "pc"."target1",
    "pc"."target2",
    "pc"."target3",
    "pc"."stop",
    "pc"."direction",
    "pc"."score",
    "pc"."finished",
    "pc"."status",
    "pc"."last_target_hit",
    "pc"."last_job_timestamp",
    "pc"."created_at",
    "pc"."updated_at"
FROM "post_crypto" AS pc
WHERE "pc"."duration" > now()
    AND "pc"."finished" = FALSE
ORDER BY "pc"."created_at" ASC
`

type GetAllActivePostsRow struct {
	ID               string           `json:"id"`
	Currency         string           `json:"currency"`
	StartPrice       float64          `json:"start_price"`
	Duration         time.Time        `json:"duration"`
	Target1          float64          `json:"target1"`
	Target2          float64          `json:"target2"`
	Target3          float64          `json:"target3"`
	Stop             float64          `json:"stop"`
	Direction        EntryPosition    `json:"direction"`
	Score            float64          `json:"score"`
	Finished         bool             `json:"finished"`
	Status           PostCryptoStatus `json:"status"`
	LastTargetHit    float64          `json:"last_target_hit"`
	LastJobTimestamp interface{}      `json:"last_job_timestamp"`
	CreatedAt        time.Time        `json:"created_at"`
	UpdatedAt        time.Time        `json:"updated_at"`
}

func (q *Queries) GetAllActivePosts(ctx context.Context) ([]GetAllActivePostsRow, error) {
	rows, err := q.db.QueryContext(ctx, getAllActivePosts)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []GetAllActivePostsRow{}
	for rows.Next() {
		var i GetAllActivePostsRow
		if err := rows.Scan(
			&i.ID,
			&i.Currency,
			&i.StartPrice,
			&i.Duration,
			&i.Target1,
			&i.Target2,
			&i.Target3,
			&i.Stop,
			&i.Direction,
			&i.Score,
			&i.Finished,
			&i.Status,
			&i.LastTargetHit,
			&i.LastJobTimestamp,
			&i.CreatedAt,
			&i.UpdatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
