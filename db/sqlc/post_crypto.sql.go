// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.20.0
// source: post_crypto.sql

package db

import (
	"context"
	"database/sql"
	"time"
)

const createPost = `-- name: CreatePost :one
INSERT INTO "post_crypto" (
        id,
        moniest_id,
        market_type,
        currency,
        start_price,
        duration,
        take_profit,
        stop,
        target1,
        target2,
        target3,
        direction,
        leverage,
        pnl,
        roi,
        last_operated_at,
        created_at,
        updated_at
    )
VALUES (
        $1,
        $2,
        $3,
        $4,
        $5,
        $6,
        $7,
        $8,
        $9,
        $10,
        $11,
        $12,
        $13,
        $14,
        $15,
        now(),
        now(),
        now()
    )
RETURNING id,
    moniest_id,
    market_type,
    currency,
    start_price,
    duration,
    take_profit,
    stop,
    target1,
    target2,
    target3,
    direction,
    leverage,
    pnl,
    roi,
    created_at,
    updated_at
`

type CreatePostParams struct {
	ID         string               `json:"id"`
	MoniestID  string               `json:"moniest_id"`
	MarketType PostCryptoMarketType `json:"market_type"`
	Currency   string               `json:"currency"`
	StartPrice float64              `json:"start_price"`
	Duration   time.Time            `json:"duration"`
	TakeProfit float64              `json:"take_profit"`
	Stop       float64              `json:"stop"`
	Target1    sql.NullFloat64      `json:"target1"`
	Target2    sql.NullFloat64      `json:"target2"`
	Target3    sql.NullFloat64      `json:"target3"`
	Direction  Direction            `json:"direction"`
	Leverage   int32                `json:"leverage"`
	Pnl        float64              `json:"pnl"`
	Roi        float64              `json:"roi"`
}

type CreatePostRow struct {
	ID         string               `json:"id"`
	MoniestID  string               `json:"moniest_id"`
	MarketType PostCryptoMarketType `json:"market_type"`
	Currency   string               `json:"currency"`
	StartPrice float64              `json:"start_price"`
	Duration   time.Time            `json:"duration"`
	TakeProfit float64              `json:"take_profit"`
	Stop       float64              `json:"stop"`
	Target1    sql.NullFloat64      `json:"target1"`
	Target2    sql.NullFloat64      `json:"target2"`
	Target3    sql.NullFloat64      `json:"target3"`
	Direction  Direction            `json:"direction"`
	Leverage   int32                `json:"leverage"`
	Pnl        float64              `json:"pnl"`
	Roi        float64              `json:"roi"`
	CreatedAt  time.Time            `json:"created_at"`
	UpdatedAt  time.Time            `json:"updated_at"`
}

func (q *Queries) CreatePost(ctx context.Context, arg CreatePostParams) (CreatePostRow, error) {
	row := q.db.QueryRowContext(ctx, createPost,
		arg.ID,
		arg.MoniestID,
		arg.MarketType,
		arg.Currency,
		arg.StartPrice,
		arg.Duration,
		arg.TakeProfit,
		arg.Stop,
		arg.Target1,
		arg.Target2,
		arg.Target3,
		arg.Direction,
		arg.Leverage,
		arg.Pnl,
		arg.Roi,
	)
	var i CreatePostRow
	err := row.Scan(
		&i.ID,
		&i.MoniestID,
		&i.MarketType,
		&i.Currency,
		&i.StartPrice,
		&i.Duration,
		&i.TakeProfit,
		&i.Stop,
		&i.Target1,
		&i.Target2,
		&i.Target3,
		&i.Direction,
		&i.Leverage,
		&i.Pnl,
		&i.Roi,
		&i.CreatedAt,
		&i.UpdatedAt,
	)
	return i, err
}

const getMoniestActivePostsByUsername = `-- name: GetMoniestActivePostsByUsername :many
SELECT "pc"."id",
    "pc"."market_type",
    "pc"."currency",
    "pc"."start_price",
    "pc"."duration",
    "pc"."take_profit",
    "pc"."stop",
    "pc"."target1",
    "pc"."target2",
    "pc"."target3",
    "pc"."direction",
    "pc"."leverage",
    "pc"."finished",
    "pc"."status",
    "pc"."pnl",
    "pc"."roi",
    "pc"."created_at",
    "pc"."updated_at",
    "m"."id" as "moniest_id",
    "m"."bio",
    "m"."description",
    "mpcs"."pnl_7days",
    "mpcs"."roi_7days",
    "mpcs"."win_rate_7days",
    "mpcs"."pnl_30days",
    "mpcs"."roi_30days",
    "mpcs"."win_rate_30days",
    "mpcs"."pnl_total",
    "mpcs"."roi_total",
    "mpcs"."win_rate_total",
    "u"."id" as "user_id",
    "u"."fullname",
    "u"."username",
    "u"."email_verified",
    "u"."location",
    "pcd"."description" as "post_description",
    COALESCE (
        (
            SELECT "image"."link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'profile_photo'
        ),
        ''
    ) AS "profile_photo_link",
    COALESCE (
        (
            SELECT "image"."thumbnail_link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'profile_photo'
        ),
        ''
    ) AS "profile_photo_thumbnail_link",
    COALESCE (
        (
            SELECT "image"."link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'background_photo'
        ),
        ''
    ) AS "background_photo_link",
    COALESCE (
        (
            SELECT "image"."thumbnail_link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'background_photo'
        ),
        ''
    ) AS "background_photo_thumbnail_link"
FROM "post_crypto" AS pc
    INNER JOIN "moniest" as m ON "pc"."moniest_id" = "m"."id"
    INNER JOIN "moniest_post_crypto_statistics" AS mpcs ON "mpcs"."moniest_id" = "m"."id"
    INNER JOIN "user" as u ON "m"."user_id" = "u"."id"
    AND "u"."username" = $1
    AND "pc"."duration" > now()
    AND "pc"."finished" = FALSE
    LEFT JOIN "post_crypto_description" as pcd ON "pcd"."post_id" = "pc"."id"
ORDER BY "pc"."created_at" DESC
LIMIT $2 OFFSET $3
`

type GetMoniestActivePostsByUsernameParams struct {
	Username string `json:"username"`
	Limit    int32  `json:"limit"`
	Offset   int32  `json:"offset"`
}

type GetMoniestActivePostsByUsernameRow struct {
	ID                           string               `json:"id"`
	MarketType                   PostCryptoMarketType `json:"market_type"`
	Currency                     string               `json:"currency"`
	StartPrice                   float64              `json:"start_price"`
	Duration                     time.Time            `json:"duration"`
	TakeProfit                   float64              `json:"take_profit"`
	Stop                         float64              `json:"stop"`
	Target1                      sql.NullFloat64      `json:"target1"`
	Target2                      sql.NullFloat64      `json:"target2"`
	Target3                      sql.NullFloat64      `json:"target3"`
	Direction                    Direction            `json:"direction"`
	Leverage                     int32                `json:"leverage"`
	Finished                     bool                 `json:"finished"`
	Status                       PostCryptoStatus     `json:"status"`
	Pnl                          float64              `json:"pnl"`
	Roi                          float64              `json:"roi"`
	CreatedAt                    time.Time            `json:"created_at"`
	UpdatedAt                    time.Time            `json:"updated_at"`
	MoniestID                    string               `json:"moniest_id"`
	Bio                          sql.NullString       `json:"bio"`
	Description                  sql.NullString       `json:"description"`
	Pnl7days                     sql.NullFloat64      `json:"pnl_7days"`
	Roi7days                     sql.NullFloat64      `json:"roi_7days"`
	WinRate7days                 sql.NullFloat64      `json:"win_rate_7days"`
	Pnl30days                    sql.NullFloat64      `json:"pnl_30days"`
	Roi30days                    sql.NullFloat64      `json:"roi_30days"`
	WinRate30days                sql.NullFloat64      `json:"win_rate_30days"`
	PnlTotal                     sql.NullFloat64      `json:"pnl_total"`
	RoiTotal                     sql.NullFloat64      `json:"roi_total"`
	WinRateTotal                 sql.NullFloat64      `json:"win_rate_total"`
	UserID                       string               `json:"user_id"`
	Fullname                     string               `json:"fullname"`
	Username                     string               `json:"username"`
	EmailVerified                bool                 `json:"email_verified"`
	Location                     sql.NullString       `json:"location"`
	PostDescription              sql.NullString       `json:"post_description"`
	ProfilePhotoLink             interface{}          `json:"profile_photo_link"`
	ProfilePhotoThumbnailLink    interface{}          `json:"profile_photo_thumbnail_link"`
	BackgroundPhotoLink          interface{}          `json:"background_photo_link"`
	BackgroundPhotoThumbnailLink interface{}          `json:"background_photo_thumbnail_link"`
}

func (q *Queries) GetMoniestActivePostsByUsername(ctx context.Context, arg GetMoniestActivePostsByUsernameParams) ([]GetMoniestActivePostsByUsernameRow, error) {
	rows, err := q.db.QueryContext(ctx, getMoniestActivePostsByUsername, arg.Username, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []GetMoniestActivePostsByUsernameRow{}
	for rows.Next() {
		var i GetMoniestActivePostsByUsernameRow
		if err := rows.Scan(
			&i.ID,
			&i.MarketType,
			&i.Currency,
			&i.StartPrice,
			&i.Duration,
			&i.TakeProfit,
			&i.Stop,
			&i.Target1,
			&i.Target2,
			&i.Target3,
			&i.Direction,
			&i.Leverage,
			&i.Finished,
			&i.Status,
			&i.Pnl,
			&i.Roi,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.MoniestID,
			&i.Bio,
			&i.Description,
			&i.Pnl7days,
			&i.Roi7days,
			&i.WinRate7days,
			&i.Pnl30days,
			&i.Roi30days,
			&i.WinRate30days,
			&i.PnlTotal,
			&i.RoiTotal,
			&i.WinRateTotal,
			&i.UserID,
			&i.Fullname,
			&i.Username,
			&i.EmailVerified,
			&i.Location,
			&i.PostDescription,
			&i.ProfilePhotoLink,
			&i.ProfilePhotoThumbnailLink,
			&i.BackgroundPhotoLink,
			&i.BackgroundPhotoThumbnailLink,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getMoniestAllPostsByUsername = `-- name: GetMoniestAllPostsByUsername :many
SELECT "pc"."id",
    "pc"."market_type",
    "pc"."currency",
    "pc"."start_price",
    "pc"."duration",
    "pc"."take_profit",
    "pc"."stop",
    "pc"."target1",
    "pc"."target2",
    "pc"."target3",
    "pc"."direction",
    "pc"."leverage",
    "pc"."finished",
    "pc"."status",
    "pc"."pnl",
    "pc"."roi",
    "pc"."created_at",
    "pc"."updated_at",
    "m"."id" as "moniest_id",
    "m"."bio",
    "m"."description",
    "mpcs"."pnl_7days",
    "mpcs"."roi_7days",
    "mpcs"."win_rate_7days",
    "mpcs"."pnl_30days",
    "mpcs"."roi_30days",
    "mpcs"."win_rate_30days",
    "mpcs"."pnl_total",
    "mpcs"."roi_total",
    "mpcs"."win_rate_total",
    "u"."id" as "user_id",
    "u"."fullname",
    "u"."username",
    "u"."email_verified",
    "u"."location",
    "pcd"."description" as "post_description",
    COALESCE (
        (
            SELECT "image"."link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'profile_photo'
        ),
        ''
    ) AS "profile_photo_link",
    COALESCE (
        (
            SELECT "image"."thumbnail_link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'profile_photo'
        ),
        ''
    ) AS "profile_photo_thumbnail_link",
    COALESCE (
        (
            SELECT "image"."link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'background_photo'
        ),
        ''
    ) AS "background_photo_link",
    COALESCE (
        (
            SELECT "image"."thumbnail_link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'background_photo'
        ),
        ''
    ) AS "background_photo_thumbnail_link"
FROM "post_crypto" AS pc
    INNER JOIN "moniest" as m ON "pc"."moniest_id" = "m"."id"
    INNER JOIN "moniest_post_crypto_statistics" AS mpcs ON "mpcs"."moniest_id" = "m"."id"
    INNER JOIN "user" as u ON "m"."user_id" = "u"."id"
    AND "u"."username" = $1
    LEFT JOIN "post_crypto_description" as pcd ON "pcd"."post_id" = "pc"."id"
ORDER BY "pc"."created_at" DESC
LIMIT $2 OFFSET $3
`

type GetMoniestAllPostsByUsernameParams struct {
	Username string `json:"username"`
	Limit    int32  `json:"limit"`
	Offset   int32  `json:"offset"`
}

type GetMoniestAllPostsByUsernameRow struct {
	ID                           string               `json:"id"`
	MarketType                   PostCryptoMarketType `json:"market_type"`
	Currency                     string               `json:"currency"`
	StartPrice                   float64              `json:"start_price"`
	Duration                     time.Time            `json:"duration"`
	TakeProfit                   float64              `json:"take_profit"`
	Stop                         float64              `json:"stop"`
	Target1                      sql.NullFloat64      `json:"target1"`
	Target2                      sql.NullFloat64      `json:"target2"`
	Target3                      sql.NullFloat64      `json:"target3"`
	Direction                    Direction            `json:"direction"`
	Leverage                     int32                `json:"leverage"`
	Finished                     bool                 `json:"finished"`
	Status                       PostCryptoStatus     `json:"status"`
	Pnl                          float64              `json:"pnl"`
	Roi                          float64              `json:"roi"`
	CreatedAt                    time.Time            `json:"created_at"`
	UpdatedAt                    time.Time            `json:"updated_at"`
	MoniestID                    string               `json:"moniest_id"`
	Bio                          sql.NullString       `json:"bio"`
	Description                  sql.NullString       `json:"description"`
	Pnl7days                     sql.NullFloat64      `json:"pnl_7days"`
	Roi7days                     sql.NullFloat64      `json:"roi_7days"`
	WinRate7days                 sql.NullFloat64      `json:"win_rate_7days"`
	Pnl30days                    sql.NullFloat64      `json:"pnl_30days"`
	Roi30days                    sql.NullFloat64      `json:"roi_30days"`
	WinRate30days                sql.NullFloat64      `json:"win_rate_30days"`
	PnlTotal                     sql.NullFloat64      `json:"pnl_total"`
	RoiTotal                     sql.NullFloat64      `json:"roi_total"`
	WinRateTotal                 sql.NullFloat64      `json:"win_rate_total"`
	UserID                       string               `json:"user_id"`
	Fullname                     string               `json:"fullname"`
	Username                     string               `json:"username"`
	EmailVerified                bool                 `json:"email_verified"`
	Location                     sql.NullString       `json:"location"`
	PostDescription              sql.NullString       `json:"post_description"`
	ProfilePhotoLink             interface{}          `json:"profile_photo_link"`
	ProfilePhotoThumbnailLink    interface{}          `json:"profile_photo_thumbnail_link"`
	BackgroundPhotoLink          interface{}          `json:"background_photo_link"`
	BackgroundPhotoThumbnailLink interface{}          `json:"background_photo_thumbnail_link"`
}

func (q *Queries) GetMoniestAllPostsByUsername(ctx context.Context, arg GetMoniestAllPostsByUsernameParams) ([]GetMoniestAllPostsByUsernameRow, error) {
	rows, err := q.db.QueryContext(ctx, getMoniestAllPostsByUsername, arg.Username, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []GetMoniestAllPostsByUsernameRow{}
	for rows.Next() {
		var i GetMoniestAllPostsByUsernameRow
		if err := rows.Scan(
			&i.ID,
			&i.MarketType,
			&i.Currency,
			&i.StartPrice,
			&i.Duration,
			&i.TakeProfit,
			&i.Stop,
			&i.Target1,
			&i.Target2,
			&i.Target3,
			&i.Direction,
			&i.Leverage,
			&i.Finished,
			&i.Status,
			&i.Pnl,
			&i.Roi,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.MoniestID,
			&i.Bio,
			&i.Description,
			&i.Pnl7days,
			&i.Roi7days,
			&i.WinRate7days,
			&i.Pnl30days,
			&i.Roi30days,
			&i.WinRate30days,
			&i.PnlTotal,
			&i.RoiTotal,
			&i.WinRateTotal,
			&i.UserID,
			&i.Fullname,
			&i.Username,
			&i.EmailVerified,
			&i.Location,
			&i.PostDescription,
			&i.ProfilePhotoLink,
			&i.ProfilePhotoThumbnailLink,
			&i.BackgroundPhotoLink,
			&i.BackgroundPhotoThumbnailLink,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getMoniestDeactivePostsByUsername = `-- name: GetMoniestDeactivePostsByUsername :many
SELECT "pc"."id",
    "pc"."market_type",
    "pc"."currency",
    "pc"."start_price",
    "pc"."duration",
    "pc"."take_profit",
    "pc"."stop",
    "pc"."target1",
    "pc"."target2",
    "pc"."target3",
    "pc"."direction",
    "pc"."leverage",
    "pc"."finished",
    "pc"."status",
    "pc"."pnl",
    "pc"."roi",
    "pc"."created_at",
    "pc"."updated_at",
    "m"."id" as "moniest_id",
    "m"."bio",
    "m"."description",
    "mpcs"."pnl_7days",
    "mpcs"."roi_7days",
    "mpcs"."win_rate_7days",
    "mpcs"."pnl_30days",
    "mpcs"."roi_30days",
    "mpcs"."win_rate_30days",
    "mpcs"."pnl_total",
    "mpcs"."roi_total",
    "mpcs"."win_rate_total",
    "u"."id" as "user_id",
    "u"."fullname",
    "u"."username",
    "u"."email_verified",
    "u"."location",
    "pcd"."description" as "post_description",
    COALESCE (
        (
            SELECT "image"."link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'profile_photo'
        ),
        ''
    ) AS "profile_photo_link",
    COALESCE (
        (
            SELECT "image"."thumbnail_link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'profile_photo'
        ),
        ''
    ) AS "profile_photo_thumbnail_link",
    COALESCE (
        (
            SELECT "image"."link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'background_photo'
        ),
        ''
    ) AS "background_photo_link",
    COALESCE (
        (
            SELECT "image"."thumbnail_link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'background_photo'
        ),
        ''
    ) AS "background_photo_thumbnail_link"
FROM "post_crypto" AS pc
    INNER JOIN "moniest" as m ON "pc"."moniest_id" = "m"."id"
    INNER JOIN "moniest_post_crypto_statistics" AS mpcs ON "mpcs"."moniest_id" = "m"."id"
    INNER JOIN "user" as u ON "m"."user_id" = "u"."id"
    AND "u"."username" = $1
    AND (
        "pc"."duration" < now()
        OR "pc"."finished" = TRUE
    )
    LEFT JOIN "post_crypto_description" as pcd ON "pcd"."post_id" = "pc"."id"
ORDER BY "pc"."created_at" DESC
LIMIT $2 OFFSET $3
`

type GetMoniestDeactivePostsByUsernameParams struct {
	Username string `json:"username"`
	Limit    int32  `json:"limit"`
	Offset   int32  `json:"offset"`
}

type GetMoniestDeactivePostsByUsernameRow struct {
	ID                           string               `json:"id"`
	MarketType                   PostCryptoMarketType `json:"market_type"`
	Currency                     string               `json:"currency"`
	StartPrice                   float64              `json:"start_price"`
	Duration                     time.Time            `json:"duration"`
	TakeProfit                   float64              `json:"take_profit"`
	Stop                         float64              `json:"stop"`
	Target1                      sql.NullFloat64      `json:"target1"`
	Target2                      sql.NullFloat64      `json:"target2"`
	Target3                      sql.NullFloat64      `json:"target3"`
	Direction                    Direction            `json:"direction"`
	Leverage                     int32                `json:"leverage"`
	Finished                     bool                 `json:"finished"`
	Status                       PostCryptoStatus     `json:"status"`
	Pnl                          float64              `json:"pnl"`
	Roi                          float64              `json:"roi"`
	CreatedAt                    time.Time            `json:"created_at"`
	UpdatedAt                    time.Time            `json:"updated_at"`
	MoniestID                    string               `json:"moniest_id"`
	Bio                          sql.NullString       `json:"bio"`
	Description                  sql.NullString       `json:"description"`
	Pnl7days                     sql.NullFloat64      `json:"pnl_7days"`
	Roi7days                     sql.NullFloat64      `json:"roi_7days"`
	WinRate7days                 sql.NullFloat64      `json:"win_rate_7days"`
	Pnl30days                    sql.NullFloat64      `json:"pnl_30days"`
	Roi30days                    sql.NullFloat64      `json:"roi_30days"`
	WinRate30days                sql.NullFloat64      `json:"win_rate_30days"`
	PnlTotal                     sql.NullFloat64      `json:"pnl_total"`
	RoiTotal                     sql.NullFloat64      `json:"roi_total"`
	WinRateTotal                 sql.NullFloat64      `json:"win_rate_total"`
	UserID                       string               `json:"user_id"`
	Fullname                     string               `json:"fullname"`
	Username                     string               `json:"username"`
	EmailVerified                bool                 `json:"email_verified"`
	Location                     sql.NullString       `json:"location"`
	PostDescription              sql.NullString       `json:"post_description"`
	ProfilePhotoLink             interface{}          `json:"profile_photo_link"`
	ProfilePhotoThumbnailLink    interface{}          `json:"profile_photo_thumbnail_link"`
	BackgroundPhotoLink          interface{}          `json:"background_photo_link"`
	BackgroundPhotoThumbnailLink interface{}          `json:"background_photo_thumbnail_link"`
}

func (q *Queries) GetMoniestDeactivePostsByUsername(ctx context.Context, arg GetMoniestDeactivePostsByUsernameParams) ([]GetMoniestDeactivePostsByUsernameRow, error) {
	rows, err := q.db.QueryContext(ctx, getMoniestDeactivePostsByUsername, arg.Username, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []GetMoniestDeactivePostsByUsernameRow{}
	for rows.Next() {
		var i GetMoniestDeactivePostsByUsernameRow
		if err := rows.Scan(
			&i.ID,
			&i.MarketType,
			&i.Currency,
			&i.StartPrice,
			&i.Duration,
			&i.TakeProfit,
			&i.Stop,
			&i.Target1,
			&i.Target2,
			&i.Target3,
			&i.Direction,
			&i.Leverage,
			&i.Finished,
			&i.Status,
			&i.Pnl,
			&i.Roi,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.MoniestID,
			&i.Bio,
			&i.Description,
			&i.Pnl7days,
			&i.Roi7days,
			&i.WinRate7days,
			&i.Pnl30days,
			&i.Roi30days,
			&i.WinRate30days,
			&i.PnlTotal,
			&i.RoiTotal,
			&i.WinRateTotal,
			&i.UserID,
			&i.Fullname,
			&i.Username,
			&i.EmailVerified,
			&i.Location,
			&i.PostDescription,
			&i.ProfilePhotoLink,
			&i.ProfilePhotoThumbnailLink,
			&i.BackgroundPhotoLink,
			&i.BackgroundPhotoThumbnailLink,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getOwnActivePostsByUsername = `-- name: GetOwnActivePostsByUsername :many
SELECT "pc"."id",
    "pc"."market_type",
    "pc"."currency",
    "pc"."start_price",
    "pc"."duration",
    "pc"."take_profit",
    "pc"."stop",
    "pc"."target1",
    "pc"."target2",
    "pc"."target3",
    "pc"."direction",
    "pc"."leverage",
    "pc"."finished",
    "pc"."status",
    "pc"."pnl",
    "pc"."roi",
    "pc"."created_at",
    "pc"."updated_at",
    "m"."id" as "moniest_id",
    "m"."bio",
    "m"."description",
    "mpcs"."pnl_7days",
    "mpcs"."roi_7days",
    "mpcs"."win_rate_7days",
    "mpcs"."pnl_30days",
    "mpcs"."roi_30days",
    "mpcs"."win_rate_30days",
    "mpcs"."pnl_total",
    "mpcs"."roi_total",
    "mpcs"."win_rate_total",
    "u"."id" as "user_id",
    "u"."fullname",
    "u"."username",
    "u"."email_verified",
    "u"."location",
    "pcd"."description" as "post_description",
    COALESCE (
        (
            SELECT "image"."link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'profile_photo'
        ),
        ''
    ) AS "profile_photo_link",
    COALESCE (
        (
            SELECT "image"."thumbnail_link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'profile_photo'
        ),
        ''
    ) AS "profile_photo_thumbnail_link",
    COALESCE (
        (
            SELECT "image"."link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'background_photo'
        ),
        ''
    ) AS "background_photo_link",
    COALESCE (
        (
            SELECT "image"."thumbnail_link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'background_photo'
        ),
        ''
    ) AS "background_photo_thumbnail_link"
FROM "post_crypto" AS pc
    INNER JOIN "moniest" as m ON "pc"."moniest_id" = "m"."id"
    INNER JOIN "moniest_post_crypto_statistics" AS mpcs ON "mpcs"."moniest_id" = "m"."id"
    INNER JOIN "user" as u ON "m"."user_id" = "u"."id"
    AND "u"."username" = $1
    AND "pc"."duration" > now()
    AND "pc"."finished" = FALSE
    LEFT JOIN "post_crypto_description" as pcd ON "pcd"."post_id" = "pc"."id"
ORDER BY "pc"."created_at" DESC
LIMIT $2 OFFSET $3
`

type GetOwnActivePostsByUsernameParams struct {
	Username string `json:"username"`
	Limit    int32  `json:"limit"`
	Offset   int32  `json:"offset"`
}

type GetOwnActivePostsByUsernameRow struct {
	ID                           string               `json:"id"`
	MarketType                   PostCryptoMarketType `json:"market_type"`
	Currency                     string               `json:"currency"`
	StartPrice                   float64              `json:"start_price"`
	Duration                     time.Time            `json:"duration"`
	TakeProfit                   float64              `json:"take_profit"`
	Stop                         float64              `json:"stop"`
	Target1                      sql.NullFloat64      `json:"target1"`
	Target2                      sql.NullFloat64      `json:"target2"`
	Target3                      sql.NullFloat64      `json:"target3"`
	Direction                    Direction            `json:"direction"`
	Leverage                     int32                `json:"leverage"`
	Finished                     bool                 `json:"finished"`
	Status                       PostCryptoStatus     `json:"status"`
	Pnl                          float64              `json:"pnl"`
	Roi                          float64              `json:"roi"`
	CreatedAt                    time.Time            `json:"created_at"`
	UpdatedAt                    time.Time            `json:"updated_at"`
	MoniestID                    string               `json:"moniest_id"`
	Bio                          sql.NullString       `json:"bio"`
	Description                  sql.NullString       `json:"description"`
	Pnl7days                     sql.NullFloat64      `json:"pnl_7days"`
	Roi7days                     sql.NullFloat64      `json:"roi_7days"`
	WinRate7days                 sql.NullFloat64      `json:"win_rate_7days"`
	Pnl30days                    sql.NullFloat64      `json:"pnl_30days"`
	Roi30days                    sql.NullFloat64      `json:"roi_30days"`
	WinRate30days                sql.NullFloat64      `json:"win_rate_30days"`
	PnlTotal                     sql.NullFloat64      `json:"pnl_total"`
	RoiTotal                     sql.NullFloat64      `json:"roi_total"`
	WinRateTotal                 sql.NullFloat64      `json:"win_rate_total"`
	UserID                       string               `json:"user_id"`
	Fullname                     string               `json:"fullname"`
	Username                     string               `json:"username"`
	EmailVerified                bool                 `json:"email_verified"`
	Location                     sql.NullString       `json:"location"`
	PostDescription              sql.NullString       `json:"post_description"`
	ProfilePhotoLink             interface{}          `json:"profile_photo_link"`
	ProfilePhotoThumbnailLink    interface{}          `json:"profile_photo_thumbnail_link"`
	BackgroundPhotoLink          interface{}          `json:"background_photo_link"`
	BackgroundPhotoThumbnailLink interface{}          `json:"background_photo_thumbnail_link"`
}

func (q *Queries) GetOwnActivePostsByUsername(ctx context.Context, arg GetOwnActivePostsByUsernameParams) ([]GetOwnActivePostsByUsernameRow, error) {
	rows, err := q.db.QueryContext(ctx, getOwnActivePostsByUsername, arg.Username, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []GetOwnActivePostsByUsernameRow{}
	for rows.Next() {
		var i GetOwnActivePostsByUsernameRow
		if err := rows.Scan(
			&i.ID,
			&i.MarketType,
			&i.Currency,
			&i.StartPrice,
			&i.Duration,
			&i.TakeProfit,
			&i.Stop,
			&i.Target1,
			&i.Target2,
			&i.Target3,
			&i.Direction,
			&i.Leverage,
			&i.Finished,
			&i.Status,
			&i.Pnl,
			&i.Roi,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.MoniestID,
			&i.Bio,
			&i.Description,
			&i.Pnl7days,
			&i.Roi7days,
			&i.WinRate7days,
			&i.Pnl30days,
			&i.Roi30days,
			&i.WinRate30days,
			&i.PnlTotal,
			&i.RoiTotal,
			&i.WinRateTotal,
			&i.UserID,
			&i.Fullname,
			&i.Username,
			&i.EmailVerified,
			&i.Location,
			&i.PostDescription,
			&i.ProfilePhotoLink,
			&i.ProfilePhotoThumbnailLink,
			&i.BackgroundPhotoLink,
			&i.BackgroundPhotoThumbnailLink,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const getOwnAllPostsByUsername = `-- name: GetOwnAllPostsByUsername :many
SELECT "pc"."id",
    "pc"."market_type",
    "pc"."currency",
    "pc"."start_price",
    "pc"."duration",
    "pc"."take_profit",
    "pc"."stop",
    "pc"."target1",
    "pc"."target2",
    "pc"."target3",
    "pc"."direction",
    "pc"."leverage",
    "pc"."finished",
    "pc"."status",
    "pc"."pnl",
    "pc"."roi",
    "pc"."created_at",
    "pc"."updated_at",
    "m"."id" as "moniest_id",
    "m"."bio",
    "m"."description",
    "mpcs"."pnl_7days",
    "mpcs"."roi_7days",
    "mpcs"."win_rate_7days",
    "mpcs"."pnl_30days",
    "mpcs"."roi_30days",
    "mpcs"."win_rate_30days",
    "mpcs"."pnl_total",
    "mpcs"."roi_total",
    "mpcs"."win_rate_total",
    "u"."id" as "user_id",
    "u"."fullname",
    "u"."username",
    "u"."email_verified",
    "u"."location",
    "pcd"."description" as "post_description",
    COALESCE (
        (
            SELECT "image"."link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'profile_photo'
        ),
        ''
    ) AS "profile_photo_link",
    COALESCE (
        (
            SELECT "image"."thumbnail_link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'profile_photo'
        ),
        ''
    ) AS "profile_photo_thumbnail_link",
    COALESCE (
        (
            SELECT "image"."link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'background_photo'
        ),
        ''
    ) AS "background_photo_link",
    COALESCE (
        (
            SELECT "image"."thumbnail_link"
            FROM "image"
            WHERE "image"."user_id" = "u"."id"
                AND "image"."type" = 'background_photo'
        ),
        ''
    ) AS "background_photo_thumbnail_link"
FROM "post_crypto" AS pc
    INNER JOIN "moniest" as m ON "pc"."moniest_id" = "m"."id"
    INNER JOIN "moniest_post_crypto_statistics" AS mpcs ON "mpcs"."moniest_id" = "m"."id"
    INNER JOIN "user" as u ON "m"."user_id" = "u"."id"
    AND "u"."username" = $1
    LEFT JOIN "post_crypto_description" as pcd ON "pcd"."post_id" = "pc"."id"
ORDER BY "pc"."created_at" DESC
LIMIT $2 OFFSET $3
`

type GetOwnAllPostsByUsernameParams struct {
	Username string `json:"username"`
	Limit    int32  `json:"limit"`
	Offset   int32  `json:"offset"`
}

type GetOwnAllPostsByUsernameRow struct {
	ID                           string               `json:"id"`
	MarketType                   PostCryptoMarketType `json:"market_type"`
	Currency                     string               `json:"currency"`
	StartPrice                   float64              `json:"start_price"`
	Duration                     time.Time            `json:"duration"`
	TakeProfit                   float64              `json:"take_profit"`
	Stop                         float64              `json:"stop"`
	Target1                      sql.NullFloat64      `json:"target1"`
	Target2                      sql.NullFloat64      `json:"target2"`
	Target3                      sql.NullFloat64      `json:"target3"`
	Direction                    Direction            `json:"direction"`
	Leverage                     int32                `json:"leverage"`
	Finished                     bool                 `json:"finished"`
	Status                       PostCryptoStatus     `json:"status"`
	Pnl                          float64              `json:"pnl"`
	Roi                          float64              `json:"roi"`
	CreatedAt                    time.Time            `json:"created_at"`
	UpdatedAt                    time.Time            `json:"updated_at"`
	MoniestID                    string               `json:"moniest_id"`
	Bio                          sql.NullString       `json:"bio"`
	Description                  sql.NullString       `json:"description"`
	Pnl7days                     sql.NullFloat64      `json:"pnl_7days"`
	Roi7days                     sql.NullFloat64      `json:"roi_7days"`
	WinRate7days                 sql.NullFloat64      `json:"win_rate_7days"`
	Pnl30days                    sql.NullFloat64      `json:"pnl_30days"`
	Roi30days                    sql.NullFloat64      `json:"roi_30days"`
	WinRate30days                sql.NullFloat64      `json:"win_rate_30days"`
	PnlTotal                     sql.NullFloat64      `json:"pnl_total"`
	RoiTotal                     sql.NullFloat64      `json:"roi_total"`
	WinRateTotal                 sql.NullFloat64      `json:"win_rate_total"`
	UserID                       string               `json:"user_id"`
	Fullname                     string               `json:"fullname"`
	Username                     string               `json:"username"`
	EmailVerified                bool                 `json:"email_verified"`
	Location                     sql.NullString       `json:"location"`
	PostDescription              sql.NullString       `json:"post_description"`
	ProfilePhotoLink             interface{}          `json:"profile_photo_link"`
	ProfilePhotoThumbnailLink    interface{}          `json:"profile_photo_thumbnail_link"`
	BackgroundPhotoLink          interface{}          `json:"background_photo_link"`
	BackgroundPhotoThumbnailLink interface{}          `json:"background_photo_thumbnail_link"`
}

func (q *Queries) GetOwnAllPostsByUsername(ctx context.Context, arg GetOwnAllPostsByUsernameParams) ([]GetOwnAllPostsByUsernameRow, error) {
	rows, err := q.db.QueryContext(ctx, getOwnAllPostsByUsername, arg.Username, arg.Limit, arg.Offset)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	items := []GetOwnAllPostsByUsernameRow{}
	for rows.Next() {
		var i GetOwnAllPostsByUsernameRow
		if err := rows.Scan(
			&i.ID,
			&i.MarketType,
			&i.Currency,
			&i.StartPrice,
			&i.Duration,
			&i.TakeProfit,
			&i.Stop,
			&i.Target1,
			&i.Target2,
			&i.Target3,
			&i.Direction,
			&i.Leverage,
			&i.Finished,
			&i.Status,
			&i.Pnl,
			&i.Roi,
			&i.CreatedAt,
			&i.UpdatedAt,
			&i.MoniestID,
			&i.Bio,
			&i.Description,
			&i.Pnl7days,
			&i.Roi7days,
			&i.WinRate7days,
			&i.Pnl30days,
			&i.Roi30days,
			&i.WinRate30days,
			&i.PnlTotal,
			&i.RoiTotal,
			&i.WinRateTotal,
			&i.UserID,
			&i.Fullname,
			&i.Username,
			&i.EmailVerified,
			&i.Location,
			&i.PostDescription,
			&i.ProfilePhotoLink,
			&i.ProfilePhotoThumbnailLink,
			&i.BackgroundPhotoLink,
			&i.BackgroundPhotoThumbnailLink,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Close(); err != nil {
		return nil, err
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
